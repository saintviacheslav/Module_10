{"version":3,"file":"static/js/643.5bcfb722.chunk.js","mappings":"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","sources":["webpack://socialnetwork/./src/components/ProfileInfo/profileinfo.module.css?0219","webpack://socialnetwork/./src/components/ThemeSwitcher/themeswitcher.module.css?b5ed","components/ThemeSwitcher/ThemeSwitcher.tsx","webpack://socialnetwork/./src/components/LanguageSwitcher/LanguageSwitcher.module.css?af3a","components/LanguageSwitcher/LanguageSwitcher.tsx","components/ProfileInfo/ProfileInfo.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"profileInfo\":\"profileinfo_profileInfo__+nJOl\",\"segmentedControl\":\"profileinfo_segmentedControl__JHddp\",\"segmentedTextActive\":\"profileinfo_segmentedTextActive__cJZXy\",\"segmentedText\":\"profileinfo_segmentedText__wk+6T\",\"secondaryText\":\"profileinfo_secondaryText__N3h0Z\",\"primaryText\":\"profileinfo_primaryText__IB5y0\",\"hint\":\"profileinfo_hint__BkH7I\",\"hintContent\":\"profileinfo_hintContent__G7r40\",\"textarea\":\"profileinfo_textarea__Eak45\",\"textareaError\":\"profileinfo_textareaError__QEWaH\",\"textareaErrorText\":\"profileinfo_textareaErrorText__fwVXB\",\"validateInfo\":\"profileinfo_validateInfo__dPsDj\",\"title\":\"profileinfo_title__UVzRO\",\"editContent\":\"profileinfo_editContent__lyysi\",\"editProfileForm\":\"profileinfo_editProfileForm__FWT1P\",\"profileInfoBlock\":\"profileinfo_profileInfoBlock__AsQqY\",\"userMainInfo\":\"profileinfo_userMainInfo__Gajgw\",\"avatarPicture\":\"profileinfo_avatarPicture__0R96O\",\"inputBlock\":\"profileinfo_inputBlock__HAmID\",\"editPreferencesBlock\":\"profileinfo_editPreferencesBlock__3fBax\",\"editPreferencesItem\":\"profileinfo_editPreferencesItem__J7NuH\",\"themeSwitcher\":\"profileinfo_themeSwitcher__wjhmL\",\"languageSwitcher\":\"profileinfo_languageSwitcher__UhT8f\"};","// extracted by mini-css-extract-plugin\nexport default {\"themeBlock\":\"themeswitcher_themeBlock__7ZLf1\",\"dark\":\"themeswitcher_dark__pDvNN\",\"themeCircle\":\"themeswitcher_themeCircle__LgXk9\",\"themeCircleActive\":\"themeswitcher_themeCircleActive__da5g6\"};","import { useTheme } from \"../../context/ThemeProvider\";\r\nimport style from \"../ThemeSwitcher/themeswitcher.module.css\";\r\nimport { Theme } from \"../../context/ThemeProvider\";\r\nimport Button from \"../Button/Button\";\r\n\r\nexport default function ThemeSwitcher() {\r\n  const { theme, toggleTheme } = useTheme();\r\n  const isDark = theme === Theme.DARK;\r\n\r\n  return (\r\n    <Button\r\n      onClick={toggleTheme}\r\n      className={`${style.themeBlock} ${isDark ? style.dark : \"\"}`}\r\n    >\r\n      <div\r\n        className={`${style.themeCircle} ${\r\n          isDark ? style.themeCircleActive : \"\"\r\n        }`}\r\n      />\r\n    </Button>\r\n  );\r\n}","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"LanguageSwitcher_wrapper__1zYzK\",\"langButton\":\"LanguageSwitcher_langButton__k26f0\",\"active\":\"LanguageSwitcher_active__kix2O\"};","import { useTranslation } from \"react-i18next\";\nimport style from \"./LanguageSwitcher.module.css\";\n\nconst LANGUAGES = [\n  { code: \"en\", label: \"EN\" },\n  { code: \"ru\", label: \"RU\" },\n] as const;\n\nexport default function LanguageSwitcher() {\n  const { i18n } = useTranslation();\n\n  return (\n    <div className={style.wrapper}>\n      {LANGUAGES.map(({ code, label }) => (\n        <button\n          key={code}\n          type=\"button\"\n          className={`${style.langButton} ${i18n.language === code ? style.active : \"\"}`}\n          onClick={() => i18n.changeLanguage(code)}\n        >\n          {label}\n        </button>\n      ))}\n    </div>\n  );\n}\n","import Button from \"../Button/Button\";\r\nimport Input from \"../Input/Input\";\r\nimport DescriptionTextarea from \"../DescriptionTextArea/DescriptionTextArea\";\r\nimport style from \"./profileinfo.module.css\";\r\nimport { useTheme } from \"../../context/ThemeProvider\";\r\nimport { FormEvent, useEffect, useRef, useState } from \"react\";\r\nimport { useAuth } from \"../../context/AuthProvider\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ThemeSwitcher from \"../ThemeSwitcher/ThemeSwitcher\";\r\nimport LanguageSwitcher from \"../LanguageSwitcher/LanguageSwitcher\";\r\n\r\nimport { useForm } from \"../../utils/useForm\";\r\nimport { validateEmail, validateUsername } from \"../../utils/validators\";\r\nimport { useToast } from \"../../context/ToastProvider\";\r\nimport { Icon } from \"../Icon/Icon\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { api } from \"../../lib/api/axios\";\r\nimport { AxiosError } from \"axios\";\r\nimport { getImageUrl } from \"../../utils/imageUrl\";\r\n\r\ntype ProfileFormValues = {\r\n  username: string;\r\n  email: string;\r\n  description: string;\r\n};\r\n\r\nexport default function ProfileInfo() {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { theme } = useTheme();\r\n  const { user, logout, updateUser } = useAuth();\r\n  const queryClient = useQueryClient();\r\n  const { addToast } = useToast();\r\n\r\n  const { values, errors, setFieldValue, setFieldError } =\r\n    useForm<ProfileFormValues>({\r\n      username: \"\",\r\n      email: \"\",\r\n      description: \"\",\r\n    });\r\n\r\n  const [avatarFile, setAvatarFile] = useState<File | null>(null);\r\n  const [avatarPreview, setAvatarPreview] = useState<string | null>(null);\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const MAX_TEXT_LENGTH = 50;\r\n\r\n  const isUsernameMax = values.username.length === MAX_TEXT_LENGTH;\r\n  const isEmailMax = values.email.length === MAX_TEXT_LENGTH;\r\n\r\n  const { data: profileData } = useQuery({\r\n    queryKey: [\"me\"],\r\n    queryFn: async () => {\r\n      const { data } = await api.get(\"/api/me\");\r\n      return data;\r\n    },\r\n    enabled: !!user,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (isInitialized) {\r\n      return;\r\n    }\r\n\r\n    const source = profileData || user;\r\n    if (source?.profileImage) {\r\n      setAvatarPreview(getImageUrl(source.profileImage));\r\n    }\r\n\r\n    setIsInitialized(true);\r\n  }, [profileData, user, isInitialized]);\r\n\r\n  const hasChanges =\r\n    values.username.trim() !== \"\" ||\r\n    values.email.trim() !== \"\" ||\r\n    values.description.trim() !== \"\" ||\r\n    avatarFile !== null;\r\n\r\n  async function uploadImageToServer(file: File): Promise<string> {\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n\r\n    const { data } = await api.post(\"/api/upload-image\", formData);\r\n\r\n    return data.url;\r\n  }\r\n\r\n  const updateProfileMutation = useMutation({\r\n    mutationFn: async () => {\r\n      const updateData: Partial<{\r\n        username: string;\r\n        email: string;\r\n        description: string;\r\n        profileImage: string;\r\n      }> = {};\r\n\r\n      if (values.username.trim()) {\r\n        updateData.username = values.username.trim();\r\n      }\r\n      if (values.email.trim()) {\r\n        updateData.email = values.email.trim();\r\n      }\r\n      if (values.description.trim()) {\r\n        updateData.description = values.description.trim();\r\n      }\r\n\r\n      if (avatarFile) {\r\n        try {\r\n          const uploadedUrl = await uploadImageToServer(avatarFile);\r\n          updateData.profileImage = uploadedUrl;\r\n        } catch (err) {\r\n          console.error(\"Image upload failed:\", err);\r\n          throw new Error(t(\"profile.imageUploadFailed\"));\r\n        }\r\n      }\r\n\r\n      const { data } = await api.put(\"/api/profile\", updateData);\r\n\r\n      return data;\r\n    },\r\n\r\n    onSuccess: (updatedUser) => {\r\n      addToast(t(\"profile.profileUpdated\"), { type: \"success\" });\r\n\r\n      updateUser(updatedUser);\r\n\r\n      queryClient.setQueryData([\"me\"], updatedUser);\r\n      queryClient.invalidateQueries({ queryKey: [\"me\"] });\r\n\r\n      if (avatarPreview && avatarPreview.startsWith(\"blob:\")) {\r\n        URL.revokeObjectURL(avatarPreview);\r\n      }\r\n\r\n      setAvatarFile(null);\r\n\r\n      if (updatedUser.profileImage) {\r\n        setAvatarPreview(getImageUrl(updatedUser.profileImage));\r\n      }\r\n\r\n      setFieldValue(\"username\", \"\");\r\n      setFieldValue(\"email\", \"\");\r\n      setFieldValue(\"description\", \"\");\r\n    },\r\n\r\n    onError: (err: unknown) => {\r\n      let message = t(\"profile.updateError\");\r\n\r\n      if (err instanceof AxiosError && err.response?.data?.message) {\r\n        message = err.response.data.message;\r\n      } else if (err instanceof Error) {\r\n        message = err.message;\r\n      }\r\n\r\n      console.error(\"Profile update error:\", err);\r\n      addToast(message, { type: \"error\" });\r\n    },\r\n  });\r\n\r\n  function handleAvatarClick() {\r\n    fileInputRef.current?.click();\r\n  }\r\n\r\n  function handleFileChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const file = e.target.files?.[0];\r\n    if (!file) {\r\n      return;\r\n    }\r\n\r\n    const validTypes = [\"image/jpeg\", \"image/png\", \"image/svg+xml\"];\r\n    if (!validTypes.includes(file.type)) {\r\n      addToast(t(\"profile.invalidAvatarType\"), { type: \"error\" });\r\n      return;\r\n    }\r\n\r\n    const maxSize = 10 * 1024 * 1024;\r\n    if (file.size > maxSize) {\r\n      addToast(t(\"profile.fileTooLarge\"), { type: \"error\" });\r\n      return;\r\n    }\r\n\r\n    const objectUrl = URL.createObjectURL(file);\r\n    setAvatarPreview(objectUrl);\r\n    setAvatarFile(file);\r\n    e.target.value = \"\";\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (avatarPreview && avatarPreview.startsWith(\"blob:\")) {\r\n        URL.revokeObjectURL(avatarPreview);\r\n      }\r\n    };\r\n  }, [avatarPreview]);\r\n\r\n  function handleSubmit(e: FormEvent) {\r\n    e.preventDefault();\r\n\r\n    setFieldError(\"email\", \"\");\r\n    setFieldError(\"username\", \"\");\r\n\r\n    let hasError = false;\r\n\r\n    if (values.email.trim() !== \"\") {\r\n      const emailError = validateEmail(values.email, t);\r\n      if (emailError) {\r\n        setFieldError(\"email\", emailError);\r\n        hasError = true;\r\n      }\r\n    }\r\n\r\n    if (values.username.trim() !== \"\") {\r\n      const usernameError = validateUsername(values.username, t);\r\n      if (usernameError) {\r\n        setFieldError(\"username\", usernameError);\r\n        hasError = true;\r\n      }\r\n    }\r\n\r\n    if (isUsernameMax) {\r\n      hasError = true;\r\n      setFieldError(\r\n        \"username\",\r\n        t(\"errors.usernameMaxLength\", { max: MAX_TEXT_LENGTH }),\r\n      );\r\n    }\r\n\r\n    if (isEmailMax) {\r\n      hasError = true;\r\n      setFieldError(\r\n        \"email\",\r\n        t(\"errors.emailMaxLength\", { max: MAX_TEXT_LENGTH }),\r\n      );\r\n    }\r\n\r\n    if (values.description.length === 200) {\r\n      hasError = true;\r\n    }\r\n\r\n    if (hasError) {\r\n      return;\r\n    }\r\n\r\n    updateProfileMutation.mutate();\r\n  }\r\n\r\n  function handleLogout() {\r\n    logout();\r\n    navigate(\"/\");\r\n  }\r\n\r\n  return (\r\n    <div className={style.editContent}>\r\n      <form className={style.editProfileForm} onSubmit={handleSubmit}>\r\n        <h1 className={style.title}>{t(\"profile.editProfile\")}</h1>\r\n\r\n        <div className={style.userMainInfo}>\r\n          <img\r\n            onClick={handleAvatarClick}\r\n            className={style.avatarPicture}\r\n            src={\r\n              avatarPreview || getImageUrl(user?.profileImage) || \"avatar.png\"\r\n            }\r\n            alt=\"avatar\"\r\n          />\r\n          <input\r\n            type=\"file\"\r\n            ref={fileInputRef}\r\n            accept=\"image/jpeg,image/png,image/svg+xml\"\r\n            style={{ display: \"none\" }}\r\n            onChange={handleFileChange}\r\n            disabled={updateProfileMutation.isPending}\r\n          />\r\n          <div className={style.userMainText}>\r\n            <p className={style.primaryText}>\r\n              {user?.firstName} {user?.secondName}\r\n            </p>\r\n            <p\r\n              style={{ cursor: \"pointer\" }}\r\n              onClick={handleAvatarClick}\r\n              className={style.secondaryText}\r\n            >\r\n              {t(\"profile.changeProfilePhoto\")}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={style.profileInfoBlock}>\r\n          <div className={style.inputBlock}>\r\n            <div className={style.hint}>\r\n              <div className={style.hintContent}>\r\n                <Icon name=\"user\" />\r\n                <p>{t(\"profile.username\")}</p>\r\n              </div>\r\n              {errors.username && <Icon name=\"cross-small\" />}\r\n            </div>\r\n            <Input\r\n              onChange={(e) => {\r\n                const newValue = e.target.value;\r\n                if (newValue.length <= MAX_TEXT_LENGTH) {\r\n                  setFieldValue(\"username\", newValue);\r\n                }\r\n                if (errors.username) setFieldError(\"username\", \"\");\r\n              }}\r\n              value={values.username}\r\n              type=\"text\"\r\n              placeholder={user?.username ?? \"@username\"}\r\n              status={errors.username || isUsernameMax ? \"error\" : \"default\"}\r\n              errorText={\r\n                errors.username ||\r\n                (isUsernameMax\r\n                  ? t(\"modalPost.characterLimit\", { max: MAX_TEXT_LENGTH })\r\n                  : \"\")\r\n              }\r\n              disabled={updateProfileMutation.isPending}\r\n            />\r\n          </div>\r\n\r\n          <div className={style.inputBlock}>\r\n            <div className={style.hint}>\r\n              <div className={style.hintContent}>\r\n                <Icon name=\"envelope\" />\r\n                <p>{t(\"auth.email\")}</p>\r\n              </div>\r\n              {errors.email && <Icon name=\"cross-small\" />}\r\n            </div>\r\n            <Input\r\n              onChange={(e) => {\r\n                const newValue = e.target.value;\r\n                if (newValue.length <= MAX_TEXT_LENGTH) {\r\n                  setFieldValue(\"email\", newValue);\r\n                }\r\n                if (errors.email) setFieldError(\"email\", \"\");\r\n              }}\r\n              value={values.email}\r\n              type=\"text\"\r\n              placeholder={user?.email ?? \"example@mail.com\"}\r\n              status={errors.email || isEmailMax ? \"error\" : \"default\"}\r\n              errorText={\r\n                errors.email ||\r\n                (isEmailMax\r\n                  ? t(\"modalPost.characterLimit\", { max: MAX_TEXT_LENGTH })\r\n                  : \"\")\r\n              }\r\n              disabled={updateProfileMutation.isPending}\r\n            />\r\n          </div>\r\n\r\n          <div className={style.inputBlock}>\r\n            <div className={style.hint}>\r\n              <div className={style.hintContent}>\r\n                <Icon name=\"pencil\" />\r\n                <p>{t(\"profile.description\")}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <DescriptionTextarea\r\n              value={values.description}\r\n              onChange={(newValue) => setFieldValue(\"description\", newValue)}\r\n              maxLength={200}\r\n              placeholder={t(\"profile.writeDescriptionPlaceholder\")}\r\n              textareaClassName={\r\n                values.description.length === 200\r\n                  ? style.textareaError\r\n                  : style.textarea\r\n              }\r\n            />\r\n          </div>\r\n          <Button\r\n            name={\r\n              updateProfileMutation.isPending\r\n                ? t(\"profile.saving\")\r\n                : t(\"profile.saveProfileChanges\")\r\n            }\r\n            disabled={updateProfileMutation.isPending || !hasChanges}\r\n          />\r\n        </div>\r\n      </form>\r\n\r\n      <div className={style.editPreferencesBlock}>\r\n        <div className={style.editPreferencesItem}>\r\n          <h1 className={style.title}>{t(\"common.preferences\")}</h1>\r\n          <div className={style.themeSwitcher}>\r\n            <ThemeSwitcher />\r\n            <p className={style.primaryText}>\r\n              {theme === \"light\" ? t(\"theme.light\") : t(\"theme.dark\")}\r\n            </p>\r\n          </div>\r\n          <div className={style.languageSwitcher}>\r\n            <LanguageSwitcher />\r\n            <p className={style.primaryText}>{t(\"common.language\")}</p>\r\n          </div>\r\n        </div>\r\n        <div className={style.editPreferencesItem}>\r\n          <h1 className={style.title}>{t(\"common.actions\")}</h1>\r\n          <Button name={t(\"common.logout\")} onClick={handleLogout} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ThemeSwitcher","theme","toggleTheme","useTheme","isDark","Theme","DARK","_jsx","Button","onClick","className","concat","style","children","LANGUAGES","code","label","LanguageSwitcher","i18n","useTranslation","map","_ref","type","language","changeLanguage","ProfileInfo","_user$username","_user$email","t","navigate","useNavigate","user","logout","updateUser","useAuth","queryClient","useQueryClient","addToast","useToast","values","errors","setFieldValue","setFieldError","useForm","username","email","description","avatarFile","setAvatarFile","useState","avatarPreview","setAvatarPreview","isInitialized","setIsInitialized","fileInputRef","useRef","MAX_TEXT_LENGTH","isUsernameMax","length","isEmailMax","data","profileData","useQuery","queryKey","queryFn","async","api","get","enabled","useEffect","source","profileImage","getImageUrl","hasChanges","trim","updateProfileMutation","useMutation","mutationFn","updateData","uploadedUrl","file","formData","FormData","append","post","url","uploadImageToServer","err","console","error","Error","put","onSuccess","updatedUser","setQueryData","invalidateQueries","startsWith","URL","revokeObjectURL","onError","_err$response","_err$response$data","message","AxiosError","response","handleAvatarClick","_fileInputRef$current","current","click","_jsxs","editContent","editProfileForm","onSubmit","e","preventDefault","hasError","emailError","validateEmail","usernameError","validateUsername","max","mutate","title","userMainInfo","avatarPicture","src","alt","ref","accept","display","onChange","_e$target$files","target","files","includes","size","objectUrl","createObjectURL","value","disabled","isPending","userMainText","primaryText","firstName","secondName","cursor","secondaryText","profileInfoBlock","inputBlock","hint","hintContent","Icon","name","Input","newValue","placeholder","status","errorText","DescriptionTextarea","maxLength","textareaClassName","textareaError","textarea","editPreferencesBlock","editPreferencesItem","themeSwitcher","languageSwitcher"],"ignoreList":[],"sourceRoot":""}